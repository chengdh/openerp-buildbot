<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    <menuitem id="softdev_config" name="Configuration" 
        parent="buildbot_menu" sequence="30"  />
        <!-- groups="project.group_project_manager" -->

    <!--user -->
        <record id="view_softdev_vuser_form" model="ir.ui.view">
          <field name="name">VCS Users</field>
            <field name="model">software_dev.vcs_user</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <newline/>
                <field name="userid"/>
              </form>
          </field>
        </record>

        <record id="action_softdev_vuser" model="ir.actions.act_window">
          <field name="name">VCS Users</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.vcs_user</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_vuser" name="VCS Users"
            action="action_softdev_vuser"
            parent="softdev_config" sequence="50"  />

    <!--commit -->
        <record id="view_softdev_commit_form" model="ir.ui.view">
          <field name="name">Code Commits</field>
            <field name="model">software_dev.commit</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="branch_id"/>
                <field name="date"/>
                <field name="name" colspan="4"/>
                <notebook colspan="4">
                    <page string="Commit">
                        <field name="subject" colspan="4" />
                        <field name="comitter_id"/>
                        <field name="description" colspan="4" />
                    </page>
                    <page string="Commit details">
                        <field name="revno"/>
                        <field name="hash"/>
                        <field name="ctype"/>
                        <field name="parent_id" />
                        <newline />
                        <field name="author_ids" colspan="4"/>
                    </page>
                    <page string="Files">
                        <field name="change_ids" colspan="4">
                            <tree>
                                <field name="filename"/>
                                <field name="ctype" />
                                <field name="lines_add" />
                                <field name="lines_rem" />
                            </tree>
                        </field>
                    </page>
                    <page string="Stats">
                        <field name="stat_ids" colspan="4">
                            <tree>
                                <field name="author_id"/>
                                <field name="commits" />
                                <field name="count_files" />
                                <field name="lines_add" />
                                <field name="lines_rem" />
                            </tree>
                        </field>
                    </page>
                    <page string="Buildset">
                        <field name="external_idstring" />
                        <field name="reason" />
                        <newline/>
                        <field name="submitted_at" />
                        <field name="complete_at" />
                        <field name="complete" />
                        <field name="results" />
                        <button string="Schedule Rebuild" 
                                name="reschedule"
                                type="object"
                                help="Mark this buildset as not-built, so that it gets another build"
                                icon="gtk-go-forward" /> <!-- todo: attrs: disabled when building -->
                    </page>
                    <page string="Build request">
                        <field name="priority" />
                        <field name="claimed_at" />
                        <field name="claimed_by_name" />
                        <field name="claimed_by_incarnation"/>
                    </page>
                    <page string="Build">
                        <field name="build_number" />
                        <newline />
                        <field name="build_start_time" />
                        <field name="build_finish_time" />
                        <field name="build_summary" colspan="4" />
                        <field name="test_results" colspan="4" />
                    </page>
                </notebook>
              </form>
          </field>
        </record>

        <record id="view_softdev_commit_tree" model="ir.ui.view">
          <field name="name">Code Commits</field>
            <field name="model">software_dev.commit</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree colors="gray: not complete;green:results==0;#ff8000:results==1;red:results==2;blue:results==3;#c000c0:results==4" >
                <field name="branch_id"/>
                <field name="revno" />
                <field name="date"/>
                <field name="subject"/>
                <field name="comitter_id"/>
                <field name="hash"/>
                <field name="complete" />
                <field name="results" />
              </tree>
          </field>
        </record>

        <record id="action_softdev_commit" model="ir.actions.act_window">
          <field name="name">Code Commits</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.commit</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_commmits" name="Commits" 
            action="action_softdev_commit"
            parent="buildbot_menu" sequence="20" 
            groups="group_softdev_user" />

    <!-- change -->
        <record id="view_softdev_change_form" model="ir.ui.view">
          <field name="name">File changes</field>
            <field name="model">software_dev.filechange</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="commit_id" />
                <newline />
                <field name="filename"/>
                <field name="ctype" />
                <field name="lines_add" />
                <field name="lines_rem" />
              </form>
          </field>
        </record>

        <record id="view_softdev_change_tree" model="ir.ui.view">
          <field name="name">File changes</field>
            <field name="model">software_dev.filechange</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="commit_id" />
                <field name="filename"/>
                <field name="ctype" />
              </tree>
          </field>
        </record>

        <record id="action_softdev_filechange" model="ir.actions.act_window">
            <field name="name">File changes</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.filechange</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

    <!-- Build Groups -->
        <record id="view_softdev_bgrp_form" model="ir.ui.view">
          <field name="name">Build Groups</field>
            <field name="model">software_dev.buildgroup</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="sequence" />
                <field name="public" />
                <field name="description" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_bgrp" model="ir.actions.act_window">
          <field name="name">Build Groups</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildgroup</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildbgroup" name="Build Groups" 
            action="action_softdev_bgrp"
            parent="softdev_config" sequence="70" />

    <!-- Build series -->
        <record id="view_softdev_bseries_form" model="ir.ui.view">
          <field name="name">Build Series</field>
            <field name="model">software_dev.buildseries</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="group_id" />
                <field name="branch_url" />
                <field name="builder_id" />
                
                <field name="sequence" />
                <field name="test_ids" />
                <field name="is_distinct"/>
                <field name="is_build" />
                <field name="poll_interval" />
                <field name="target_path" />
                <field name="is_template" />
                <field name="latest_commit_id" />
                <field name="dep_branch_ids" colspan="4" />
                <field name="description" colspan="4" />
              </form>
          </field>
        </record>

        <record id="view_softdev_bseries_tree" model="ir.ui.view">
          <field name="name">Build Series</field>
            <field name="model">software_dev.buildseries</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
		<field name="group_id" />
                <field name="name"/>
                <field name="branch_url" />
                <field name="is_build" />
                <field name="target_path" />
                <field name="is_template" />
                <field name="latest_commit_id" />
              </tree>
          </field>
        </record>

         <record id="view_softdev_bseries_search" model="ir.ui.view">
            <field name="name">Build Series Search</field>
            <field name="model">software_dev.buildseries</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Build Series Search">
                    <group col="10" colspan="4">
                        <field name="name"/>
                        <field name="branch_url"/>
                        <field name="latest_commit_id"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="4" groups="base.group_extended">
                        <filter icon="terp-check" name="is_template" string="Templates" domain="[('is_template', '=', True)]"/>
                        <filter icon="terp-check" name="is_build" string="Build" domain="[('is_build', '=', True)]"/>
                        <filter string="Group" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'group_id'}"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="action_softdev_bseries" model="ir.actions.act_window">
          <field name="name">Build Series</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildseries</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildseries" name="Build Series" 
            action="action_softdev_bseries"
            parent="softdev_config" sequence="80" />


    <!-- Test step Attributes -->
        <record id="view_softdev_tstep_attr_form" model="ir.ui.view">
          <field name="name">Test Step Attributes</field>
            <field name="model">software_dev.tsattr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
              <field name="tstep_id" /> <!-- TODO-->
                <field name="name"/>
                <field name="value"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_tstep_attr_tree" model="ir.ui.view">
          <field name="name">Test step Attributes</field>
            <field name="model">software_dev.tsattr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <tree editable="bottom">
              <field name="tstep_id" /> <!-- TODO-->
                <field name="name"/>
                <field name="value"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_tstep_attr" model="ir.actions.act_window">
          <field name="name">Test Step Attributes</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.tsattr</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

    <!-- Test Steps -->
        <record id="view_softdev_tsteps_form" model="ir.ui.view">
          <field name="name">Software Test Steps</field>
            <field name="model">software_dev.teststep</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="sequence" />
                <field name="name"/>
                <!-- <field name="test_id" /> -->
                <field name="attribute_ids" colspan="4" editable="bottom">
                    <tree editable="bottom">
                        <field name="name"/>
                        <field name="value"/>
                    </tree>
                </field>
              </form>
          </field>
        </record>

        <record id="view_softdev_tsteps_tree" model="ir.ui.view">
          <field name="name">Software Test Steps</field>
            <field name="model">software_dev.teststep</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="sequence" />
                <field name="name"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_teststep" model="ir.actions.act_window">
          <field name="name">Software Test Steps</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.teststep</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

    <!-- Test Results -->
        <record id="view_softdev_tresults_form" model="ir.ui.view">
          <field name="name">Test Step Results</field>
            <field name="model">software_dev.test_result</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="build_id" />
                <field name="sequence" />
                <field name="name"/>
                <field name="substep" />
                <field name="state" />
                <!-- <field name="test_id" /> -->
                <field name="blame_log" colspan="4"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_tresults_tree" model="ir.ui.view">
          <field name="name">Test Step Results</field>
            <field name="model">software_dev.test_result</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="sequence" />
                <field name="name"/>
                <field name="substep" />
                <field name="state" />
              </tree>
          </field>
        </record>

        <record id="action_softdev_test_results" model="ir.actions.act_window">
          <field name="name">Test Step Results</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.test_result</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

    <!-- Buildbot Attributes -->
        <record id="view_softdev_bbot_attr_form" model="ir.ui.view">
          <field name="name">Buildbot Attributes</field>
            <field name="model">software_dev.battr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="value"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_bbot_attr_tree" model="ir.ui.view">
          <field name="name">Buildbot Attributes</field>
            <field name="model">software_dev.battr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <tree editable="bottom">
                <field name="name"/>
                <field name="value"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_bbot_attr" model="ir.actions.act_window">
          <field name="name">Buildbot Attributes</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.battr</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

    <!-- Build Bots -->
        <record id="view_softdev_bbots_form" model="ir.ui.view">
          <field name="name">Build Bots</field>
            <field name="model">software_dev.buildbot</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="tech_code"/>
                <field name="http_url" />
                <field name="http_port" />
                <field name="attribute_ids" colspan="4">
                    <tree editable="bottom">
                        <field name="name"/>
                        <field name="value"/>
                    </tree>
                </field>
                <field name="description" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_buildbots" model="ir.actions.act_window">
          <field name="name">Build Bots</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildbot</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildbots" name="Build bots" 
            action="action_softdev_buildbots"
            parent="softdev_config" sequence="90" />

    <!-- Build Slaves -->
        <record id="view_softdev_bbslave_form" model="ir.ui.view">
          <field name="name">Build Slaves</field>
            <field name="model">software_dev.bbslave</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="bbot_id" />
                <newline />
                <field name="tech_code"/>
                <field name="password"/>
                <!-- <field name="property_ids" colspan="4" /> -->
              </form>
          </field>
        </record>

        <record id="action_softdev_bbslaves" model="ir.actions.act_window">
          <field name="name">Build Slaves</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.bbslave</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_bbslaves" name="Build Slaves" 
            action="action_softdev_bbslaves"
            parent="softdev_config" sequence="100" />

    <!-- pending merges -->
        <record id="view_softdev_merge_form" model="ir.ui.view">
          <field name="name">Pending merges</field>
            <field name="model">software_dev.mergerequest</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="commit_id" colspan="4"/>
                <field name="branch_id"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_merge_tree" model="ir.ui.view">
          <field name="name">Pending merges Tree</field>
            <field name="model">software_dev.mergerequest</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="commit_id"/>
                <field name="branch_id"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_mergerequest" model="ir.actions.act_window">
          <field name="name">Merge Requests</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.mergerequest</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_mergerequest" name="Pending Merges"
            action="action_softdev_mergerequest"
            parent="softdev_config" sequence="50"  />

</data>
</openerp>