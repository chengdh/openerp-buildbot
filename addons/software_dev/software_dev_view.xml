<?xml version="1.0"?>
<openerp>
    <data>

    <menuitem id="softdev_menu" name="Software Development"
        icon="terp-tools" groups="project.group_project_manager"
        sequence="10" parent="base.menu_main_pm" />
    <menuitem id="softdev_config" name="Configuration"
        parent="softdev_menu" sequence="100" groups="project.group_project_manager" />

    <menuitem id="softdev_main_repos" name="Repositories Configuration"
        parent="softdev_config" sequence="30"
        groups="project.group_project_manager" />

    <menuitem id="softdev_config_packages" name="Packages Configuration"
        parent="softdev_config" sequence="30"
        groups="project.group_project_manager" />

    <menuitem id="softdev_config_builds" name="Builds Configuration"
        parent="softdev_config" sequence="30"
        groups="project.group_project_manager" />

    </data>
    <data>

    <!-- Packages -->
        <record id="view_softdev_pkg_form" model="ir.ui.view">
          <field name="name">Software Packages</field>
            <field name="model">software_dev.package</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="project_id" />
                <field name="component_ids" colspan="4" />
                <field name="description" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_pkg" model="ir.actions.act_window">
          <field name="name">Software Packages</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.package</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_packages" name="Packages"
            action="action_softdev_pkg"
            parent="softdev_config_packages" sequence="10"
            groups="project.group_project_manager" />

    <!-- components -->
        <record id="view_softdev_comp_form" model="ir.ui.view">
          <field name="name">Package Components</field>
            <field name="model">software_dev.component</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="tech_code" />
                <field name="dest_path" colspan="4" />
                <field name="branch_id"/>
                <field name="commit_id"/>
                <field name="update_rev"/>
                <field name="description" colspan="4" />
                <field name="part_ids" colspan="4">
                    <tree editable="bottom">
                        <field name="sequence" />
                        <field name="name" />
                        <field name="regex" />
                        <field name="tech_code" />
                    </tree>
                    <form>
                        <field name="sequence" />
                        <field name="name" />
                        <field name="regex" />
                        <field name="tech_code" />
                    </form>
                </field>
              </form>
          </field>
        </record>

        <record id="action_softdev_comp" model="ir.actions.act_window">
          <field name="name">Package Components</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.component</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_components" name="Components"
            action="action_softdev_comp"
            parent="softdev_config_packages" sequence="20"
            groups="project.group_project_manager" />

    <!-- repo hosts -->
        <record id="view_softdev_host_form" model="ir.ui.view">
          <field name="name">Repository Hosts</field>
            <field name="model">software_dev.repohost</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="rtype"/>
                <field name="host_family"/>
                <field name="base_url" colspan="4" />
                <field name="browse_url" colspan="4" />
                <field name="repo_ids" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_host" model="ir.actions.act_window">
          <field name="name">Repository Hosts</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.repohost</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_repohosts" name="Hosts"
            action="action_softdev_host"
            parent="softdev_main_repos" sequence="10"
            groups="project.group_project_manager" />

    <!-- repo -->
        <record id="view_softdev_repo_form" model="ir.ui.view">
          <field name="name">Software Repositories</field>
            <field name="model">software_dev.repo</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="rtype"/>
                <field name="host_id"/>
                <field name="fork_of_id" />
                <field name="proxy_location" />
                <field name="slave_proxy_url" />
                <field name="local_prefix" />
                <field name="deploy_key" />
                <field name="shallow" 
                    attrs="{'invisible': [('rtype', 'not in', ('bzr', 'git'))]}" />
                <field name="submodules" 
                    attrs="{'invisible': [('rtype', '!=', 'git')]}" />
                <field name="base_url" colspan="4"/>
                <field name="branch_ids" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_repo" model="ir.actions.act_window">
          <field name="name">Software Repositories</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.repo</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_repos" name="Repositories"
            action="action_softdev_repo"
            parent="softdev_main_repos" sequence="20"
            groups="project.group_project_manager" />

    <!-- branch -->
        <record id="view_softdev_branch_form" model="ir.ui.view">
          <field name="name">Code branches</field>
            <field name="model">software_dev.branch</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="tech_code"/>
                <newline />
                <field name="repo_id"/>
                <field name="poll_interval" />
                <field name="sub_url"/>
                <field name="fetch_url" />
                <field name="browse_url" />
                <field name="description" colspan="4"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_branch_tree" model="ir.ui.view">
          <field name="name">Code branches</field>
            <field name="model">software_dev.branch</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="repo_id"/>
                <field name="name"/>
                <field name="tech_code"/>
                <field name="fetch_url" />
              </tree>
          </field>
        </record>

        <record id="view_softdev_branch_search" model="ir.ui.view">
            <field name="name">Branches Search</field>
            <field name="model">software_dev.branch</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Branches Search">
                    <group col="6" colspan="4">
                        <field name="name"/>
                        <field name="repo_id"/>
                        <!-- For hash, we only match the beginning, let the index be used -->
                        <field name="sub_url" />
			<field name="tech_code" />
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="4" groups="base.group_extended">
                        <filter string="Repository" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'repo_id'}"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="action_softdev_branch" model="ir.actions.act_window">
          <field name="name">Code branches</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.branch</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_branch" name="Code branches"
            action="action_softdev_branch"
            parent="softdev_config" sequence="40"
            groups="project.group_project_manager" />

    <!--user -->
        <record id="view_softdev_vuser_form" model="ir.ui.view">
          <field name="name">VCS Users</field>
            <field name="model">software_dev.vcs_user</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <newline />
                <field name="employee_id"/>
                <field name="partner_address_id" />
                <newline/>
                <field name="host_id"/>
                <field name="userid"/>
                <field name="temp_name" 
                    attrs="{'invisible':['|',('employee_id','!=', False),('partner_address_id','!=',False)]}" />
              </form>
          </field>
        </record>

        <record id="view_softdev_vuser_tree" model="ir.ui.view">
            <field name="name">VCS Users</field>
            <field name="model">software_dev.vcs_user</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="host_id" />
                    <field name="userid"/>
                    <field name="name" />
                    <field name="employee_id"/>
                    <field name="partner_address_id" />
                </tree>
            </field>
        </record>

         <record id="view_softdev_vusers_search" model="ir.ui.view">
            <field name="name">VCS Users Search</field>
            <field name="model">software_dev.vcs_user</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="VCS Users Search">
                    <group col="10" colspan="4">
                        <!--<field name="name"/> have to write name_search()-->
                        <field name="userid"/>
                        <field name="employee_id"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="4" groups="base.group_extended">
                        <!--<filter icon="terp-check" name="is_template" string="Templates" domain="[('is_template', '=', True)]"/>-->
                        <!--<filter icon="terp-check" name="is_build" string="Build" domain="[('is_build', '=', True)]"/>-->
                        <filter string="Host" icon="terp-stock_effects-object-colorize" domain="[]" 
                            context="{'group_by':'host_id'}"/>
                        <filter string="Employee" icon="terp-stock_effects-object-colorize" domain="[]" 
                            context="{'group_by':'employee_id'}"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="action_softdev_vuser" model="ir.actions.act_window">
          <field name="name">VCS Users</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.vcs_user</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_vuser" name="VCS Users"
            action="action_softdev_vuser"
            parent="softdev_main_repos" sequence="50"
            groups="project.group_project_manager" />

    <!--commit -->
        <record id="view_softdev_commit_form" model="ir.ui.view">
          <field name="name">Code Commits</field>
            <field name="model">software_dev.commit</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="branch_id" attrs="{'required':[('ctype','!=','incomplete')]}"/>
                <field name="date" attrs="{'required':[('ctype','!=','incomplete')]}"/>
                <field name="name" colspan="4"/>

                <notebook colspan="4">
                    <page string="Commit">
                        <field name="subject" colspan="4" attrs="{'required':[('ctype','!=','incomplete')]}"/>
                        <field name="comitter_id" attrs="{'required':[('ctype','!=','incomplete')]}"/>
                        <field name="description" colspan="4" />
                    </page>
                    <page string="Commit details">
                        <field name="revno"/>
                        <field name="hash"/>
                        <field name="ctype"/>
                        <field name="parent_id" />
                        <field name="tag_descr"/>
                        <newline />
                        <field name="author_ids" colspan="4"/>
                        <field name="contained_commit_ids" colspan="4"/>
                    </page>
                    <page string="Files">
                        <field name="change_ids" colspan="4">
                            <tree>
                                <field name="filename"/>
                                <field name="ctype" />
                                <field name="lines_add" />
                                <field name="lines_rem" />
                                <field name="merge_add" />
                                <field name="merge_rem" />
                            </tree>
                        </field>
                    </page>
                    <page string="Stats">
                        <field name="stat_ids" colspan="4">
                            <tree>
                                <field name="author_id"/>
                                <field name="commits" />
                                <field name="count_files" />
                                <field name="lines_add" />
                                <field name="lines_rem" />
                                <field name="merge_add" />
                                <field name="merge_rem" />
                            </tree>
                        </field>
                    </page>
                </notebook>

              </form>
          </field>
        </record>

        <record id="view_softdev_commit_tree" model="ir.ui.view">
          <field name="name">Code Commits</field>
            <field name="model">software_dev.commit</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree >
                    <!-- colors="gray: not complete;green:results==0;#ff8000:results==1;red:results==2;blue:results==3;#c000c0:results==4" > -->
                <field name="branch_id"/>
                <field name="revno" />
                <field name="date"/>
                <field name="subject"/>
                <field name="comitter_id"/>
                <field name="hash"/>
                <!-- <field name="complete" /> -->
                <!--<field name="results" />-->
              </tree>
          </field>
        </record>

         <record id="view_softdev_commit_search" model="ir.ui.view">
            <field name="name">Commit Search</field>
            <field name="model">software_dev.commit</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Commits Search">
                    <group col="6" colspan="4">
                        <field name="branch_id"/>
                        <field name="revno"/>
                        <!-- For hash, we only match the beginning, let the index be used -->
                        <field name="hash" filter_domain="[('hash','=ilike',self +'%%')]" />
                    </group>
                    <newline/>
                    <group expand="0" string="More..." colspan="4" col="10" >
                        <filter icon="terp-check" name="is_incomplete" string="Incomplete" domain="[('ctype', '=', 'incomplete')]" />
                        <field name="date" />
                        <field name="comitter_id" />
                        <field name="subject" />
                        <field name="description" />
                    </group>
                    <newline />
                    <group expand="0" string="Group By..." colspan="4" col="4" groups="base.group_extended">
                        <!--<filter icon="terp-check" name="is_template" string="Templates" domain="[('is_template', '=', True)]"/>-->
                        <!--<filter icon="terp-check" name="is_build" string="Build" domain="[('is_build', '=', True)]"/>-->
                        <filter string="Branch" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'branch_id'}"/>
                        <filter string="Comitter" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'comitter_id'}"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="action_softdev_commit" model="ir.actions.act_window">
          <field name="name">Code Commits</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.commit</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_commmits" name="Commits"
            action="action_softdev_commit"
            parent="softdev_menu" sequence="20"
            groups="software_dev.group_softdev_user" />

    <!-- change -->
        <record id="view_softdev_change_form" model="ir.ui.view">
          <field name="name">File changes</field>
            <field name="model">software_dev.filechange</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="commit_id" />
                <newline />
                <field name="filename"/>
                <field name="ctype" />
                <field name="lines_add" />
                <field name="lines_rem" />
                <field name="merge_add" />
                <field name="merge_rem" />
              </form>
          </field>
        </record>

        <record id="view_softdev_change_tree" model="ir.ui.view">
          <field name="name">File changes</field>
            <field name="model">software_dev.filechange</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="commit_id" />
                <field name="filename"/>
                <field name="ctype" />
              </tree>
          </field>
        </record>

        <record id="action_softdev_filechange" model="ir.actions.act_window">
            <field name="name">File changes</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.filechange</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

    <!-- Build Groups -->
        <record id="view_softdev_bgrp_form" model="ir.ui.view">
          <field name="name">Build Groups</field>
            <field name="model">software_dev.buildgroup</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="sequence" />
                <field name="public" />
                <field name="description" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_bgrp" model="ir.actions.act_window">
          <field name="name">Build Groups</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildgroup</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildbgroup" name="Build Groups"
            action="action_softdev_bgrp"
            parent="softdev_config_builds" sequence="10"
            groups="project.group_project_manager" />

    <!-- Builders -->
        <record id="view_softdev_builder_form" model="ir.ui.view">
          <field name="name">Builders</field>
            <field name="model">software_dev.builder</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="description" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_builder" model="ir.actions.act_window">
          <field name="name">Builders</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.builder</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_builder" name="Builders"
            action="action_softdev_builder"
            parent="softdev_config_builds" sequence="20"
            groups="project.group_project_manager" />

    <!-- Build series -->
        <record id="view_softdev_bseries_form" model="ir.ui.view">
          <field name="name">Build Series</field>
            <field name="model">software_dev.buildseries</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <newline/>
                <field name="group_id" />
                <field name="sequence" />
                <newline/>
                <group string="Source" colspan="2" col="2">
                    <field name="package_id"/>
                    <field name="branch_component" />
                    <field name="branch_id" />
                    <field name="scheduler" />
                    <field name="tstimer" attrs="{'invisible': [('scheduler', 'in', ('dependent','none'))]}" />
                    <field name="is_distinct"/>
                </group>
                <group string="Build" colspan="2" col="2">
                    <field name="builder_id" />
                    <field name="test_id" />
                    <field name="slave_ids" colspan="2"/>
                </group>
                <group string="Description" colspan="4" >
                    <field name="description" colspan="4" nolabel="1" />
                </group>
              </form>
          </field>
        </record>

        <record id="view_softdev_bseries_tree" model="ir.ui.view">
          <field name="name">Build Series</field>
            <field name="model">software_dev.buildseries</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="group_id" />
                <field name="name"/>
                <field name="branch_id" />
                <field name="builder_id" />
                <field name="package_id" />
              </tree>
          </field>
        </record>

         <record id="view_softdev_bseries_search" model="ir.ui.view">
            <field name="name">Build Series Search</field>
            <field name="model">software_dev.buildseries</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Build Series Search">
                    <group col="10" colspan="4">
                        <field name="name"/>
                        <field name="branch_id"/>
                        <field name="package_id"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="4" groups="base.group_extended">
                        <!--<filter icon="terp-check" name="is_template" string="Templates" domain="[('is_template', '=', True)]"/>-->
                        <!--<filter icon="terp-check" name="is_build" string="Build" domain="[('is_build', '=', True)]"/>-->
                        <filter string="Group" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'group_id'}"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="action_softdev_bseries" model="ir.actions.act_window">
          <field name="name">Build Series</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildseries</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildseries" name="Build Series"
            action="action_softdev_bseries"
            parent="softdev_config_builds" sequence="30"
            groups="project.group_project_manager" />


    <!-- Test step Attributes -->
        <record id="view_softdev_tstep_attr_form" model="ir.ui.view">
          <field name="name">Test Step Attributes</field>
            <field name="model">software_dev.tsattr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="tstep_id" /> <!-- TODO-->
                <field name="name"/>
                <field name="value"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_tstep_attr_tree" model="ir.ui.view">
          <field name="name">Test step Attributes</field>
            <field name="model">software_dev.tsattr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <tree editable="bottom">
                <field name="name"/>
                <field name="value"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_tstep_attr" model="ir.actions.act_window">
          <field name="name">Test Step Attributes</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.tsattr</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

    <!-- Tests -->
        <record id="view_softdev_tests_form" model="ir.ui.view">
          <field name="name">Software Tests</field>
            <field name="model">software_dev.test</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="step_ids" colspan="4"/>
                <field name="description" colspan="4" />
              </form>
          </field>
        </record>

        <record id="action_softdev_test" model="ir.actions.act_window">
          <field name="name">Software Tests</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.test</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_tests" name="Software Tests"
            action="action_softdev_test"
            parent="softdev_config_builds" sequence="40"
            groups="project.group_project_manager" />

    <!-- Test Steps -->
        <record id="view_softdev_tsteps_form" model="ir.ui.view">
          <field name="name">Software Test Steps</field>
            <field name="model">software_dev.teststep</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="sequence" />
                <!-- <field name="test_id" /> -->
                <field name="attribute_ids" nolabel="1" colspan="4">
                    <tree string="Parameters" editable="bottom">
                        <field name="name"/>
                        <field name="value"/>
                    </tree>
                    <form>
                        <field name="name"/>
                        <field name="value"/>
                    </form>
                </field>
              </form>
          </field>
        </record>

        <record id="view_softdev_tsteps_tree" model="ir.ui.view">
          <field name="name">Software Test Steps</field>
            <field name="model">software_dev.teststep</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="sequence" />
                <field name="name"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_teststep" model="ir.actions.act_window">
          <field name="name">Software Test Steps</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.teststep</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

    <!-- Test Results -->
        <record id="view_softdev_tresults_form" model="ir.ui.view">
          <field name="name">Test Step Results</field>
            <field name="model">software_dev.test_result</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="build_id" />
                <field name="sequence" />
                <field name="name"/>
                <field name="substep" />
                <field name="state" />
                <!-- <field name="test_id" /> -->
                <field name="blame_log" colspan="4"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_tresults_tree" model="ir.ui.view">
          <field name="name">Test Step Results</field>
            <field name="model">software_dev.test_result</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="sequence" />
                <field name="name"/>
                <field name="substep" />
                <field name="state" />
              </tree>
          </field>
        </record>

        <record id="action_softdev_test_results" model="ir.actions.act_window">
          <field name="name">Test Step Results</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.test_result</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>


    <!-- Buildbot Attributes -->
        <record id="view_softdev_bbot_attr_form" model="ir.ui.view">
          <field name="name">Buildbot Attributes</field>
            <field name="model">software_dev.battr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="value"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_bbot_attr_tree" model="ir.ui.view">
          <field name="name">Buildbot Attributes</field>
            <field name="model">software_dev.battr</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <tree editable="bottom">
                <field name="name"/>
                <field name="value"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_bbot_attr" model="ir.actions.act_window">
          <field name="name">Buildbot Attributes</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.battr</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

    <!-- Build Bots -->
        <record id="view_softdev_bbots_form" model="ir.ui.view">
          <field name="name">Build Bots</field>
            <field name="model">software_dev.buildbot</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="tech_code"/>
                <field name="user_id" />
                <field name="http_url" />
                <field name="http_port" />
                <field name="attribute_ids" colspan="4">
                    <tree>
                        <field name="name"/>
                        <field name="value"/>
                    </tree>
                </field>
                <field name="description" colspan="4" />
                <group colspan="4" col="6">
                    <button string="Poll Sources"
                                name="poll_sources"
                                type="object"
                                help="Mark this buildset as not-built, so that it gets another build"
                                icon="gtk-go-forward" />
                    <button string="Trigger Builds"
                                name="trigger_builds"
                                type="object"
                                help="Mark this buildset as not-built, so that it gets another build"
                                icon="gtk-go-forward" />
                    <button string="Reconfigure Buildbot"
                                name="trigger_reconfig"
                                type="object"
                                help="Mark this buildset as not-built, so that it gets another build"
                                icon="gtk-go-forward" />
                </group>
              </form>
          </field>
        </record>
	
	<record id="view_softdev_bbots_tree" model="ir.ui.view">
          <field name="name">Build Bots</field>
            <field name="model">software_dev.buildbot</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="name"/>
                <field name="tech_code"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_buildbots" model="ir.actions.act_window">
          <field name="name">Build Bots</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildbot</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildbots" name="Build bots"
            action="action_softdev_buildbots"
            parent="softdev_config_builds" sequence="21"
            groups="project.group_project_manager" />

    <!-- Build Slaves -->
        <record id="view_softdev_bbslave_form" model="ir.ui.view">
          <field name="name">Build Slaves</field>
            <field name="model">software_dev.bbslave</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="name"/>
                <field name="bbot_id" />
                <field name="dedicated" />
                <newline />
                <field name="tech_code"/>
                <field name="password"/>
                <newline/>
                <field name="max_builds" />
                <newline />
                <field name="test_ids" colspan="4"/>
                <!-- <field name="property_ids" colspan="4" /> -->
              </form>
          </field>
        </record>

        <record id="action_softdev_bbslaves" model="ir.actions.act_window">
          <field name="name">Build Slaves</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.bbslave</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_bbslaves" name="Build Slaves"
            action="action_softdev_bbslaves"
            parent="softdev_config_builds" sequence="25"
            groups="project.group_project_manager" />


    <!-- pending merges -->
        <record id="view_softdev_merge_form" model="ir.ui.view">
          <field name="name">Pending merges</field>
            <field name="model">software_dev.mergerequest</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="commit_id" colspan="4"/>
                <field name="branch_id"/>
              </form>
          </field>
        </record>

        <record id="view_softdev_merge_tree" model="ir.ui.view">
          <field name="name">Pending merges Tree</field>
            <field name="model">software_dev.mergerequest</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="commit_id"/>
                <field name="branch_id"/>
              </tree>
          </field>
        </record>

        <record id="action_softdev_mergerequest" model="ir.actions.act_window">
          <field name="name">Merge Requests</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.mergerequest</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_mergerequest" name="Pending Merges"
            action="action_softdev_mergerequest"
            parent="softdev_config" sequence="50"  />

    <!-- Build set  -->
        <record id="view_softdev_buildset_tree" model="ir.ui.view">
          <field name="name">Build Sets</field>
            <field name="model">software_dev.buildset</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree colors="gray: not complete;green:results==0;#ff8000:results==1;red:results==2;blue:results==3;#c000c0:results==4" >
                <field name="commit_id"/>
                <field name="reason" />
                <field name="submitted_at" />
                <field name="complete" />
                <field name="complete_at" />
                <field name="results" />
              </tree>
          </field>
        </record>

        <record id="view_softdev_buildset_form" model="ir.ui.view">
          <field name="name">Build Sets</field>
            <field name="model">software_dev.buildset</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="commit_id" colspan="4"/>
                <field name="external_idstring" />
                <field name="reason" />
                <field name="submitted_at" />
                <field name="complete" />
                <field name="complete_at" />
                <field name="results" />
              </form>
          </field>
        </record>


        <record id="action_softdev_buildset" model="ir.actions.act_window">
          <field name="name">Build Sets</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildset</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildsets" name="Build Sets"
            action="action_softdev_buildset"
            parent="softdev_menu" sequence="20"
            groups="software_dev.group_softdev_user" />

    <!-- Build Requests -->

        <record id="view_softdev_buildrequest_tree" model="ir.ui.view">
          <field name="name">Build Requests</field>
            <field name="model">software_dev.buildrequest</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree colors="gray: not complete;green:results==0;#ff8000:results==1;red:results==2;blue:results==3;#c000c0:results==4" >
                <field name="builder_id" />
                <field name="buildsetid"/>
                <field name="claimed_at" />
                <field name="complete" />
                <field name="results" />
              </tree>
          </field>
        </record>
        
        <record id="view_softdev_buildrequest_form" model="ir.ui.view">
          <field name="name">Build Requests</field>
            <field name="model">software_dev.buildrequest</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="buildsetid" colspan="4" />
                <field name="builder_id"/>
                <newline/>
                <field name="submitted_at" />
                <field name="priority" />
                <newline/>
                <field name="claimed_at" />
                <field name="claimed_by_incarnation" />
                <field name="claimed_by_name" />
                <newline/>
                <field name="complete" />
                <field name="complete_at" />
                <newline/>
                <field name="results" />
                <button string="Schedule Rebuild" 
                                name="reschedule"
                                type="object"
                                help="Mark this buildset as not-built, so that it gets another build"
                                icon="gtk-go-forward" /> <!-- todo: attrs: disabled when building -->
              </form>
          </field>
        </record>


        <record id="action_softdev_buildrequest" model="ir.actions.act_window">
          <field name="name">Build Requests</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.buildrequest</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_buildrequests" name="Build Requests"
            action="action_softdev_buildrequest"
            parent="softdev_menu" sequence="20"
            groups="software_dev.group_softdev_user" />

    <!-- Build -->

        <record id="view_softdev_build_tree" model="ir.ui.view">
          <field name="name">Builds</field>
            <field name="model">software_dev.build</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree>
                <field name="buildrequest_id"/>
                <field name="build_number" />
              </tree>
          </field>
        </record>
        
        <record id="view_softdev_build_form" model="ir.ui.view">
          <field name="name">Build</field>
            <field name="model">software_dev.build</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form>
                <field name="buildrequest_id" colspan="4"/>
                <field name="buildername" />
                <field name="build_number" />
                <newline />
                <field name="build_start_time" />
                <field name="build_finish_time" />
                <field name="build_summary" colspan="4" />
                <field name="test_results" colspan="4" />
              </form>
          </field>
        </record>


        <record id="action_softdev_build" model="ir.actions.act_window">
          <field name="name">Builds</field>
          <field name="type">ir.actions.act_window</field>
            <field name="res_model">software_dev.build</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
         </record>

        <menuitem id="softdev_builds" name="Builds"
            action="action_softdev_build"
            parent="softdev_menu" sequence="20"
            groups="software_dev.group_softdev_user" />

</data>
</openerp>